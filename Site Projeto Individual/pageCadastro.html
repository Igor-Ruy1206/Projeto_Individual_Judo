<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Cadastro</title>
    <link rel="stylesheet" href="styleCadastro.css">
</head>
<body>
    <header>
    <div class="navbar">
        <!-- LOGO -->
        <div class="logo-container">
            <div class="logo-icone"></div>
        </div>

 <nav>
 
            <div class="menu">
            <span><a href="./index.html">Home</a></span>
            <span><a href="./index.html">Sobre o Judô</a></span>
            <span><a href="./index.html#eticaJudo">Ética do Judô</a></span>
            <span><a href="./index.html#idDisciplina">Benefícios</a></span>
            <span><a href="./index.html#sobreMim">Sobre Mim</a></span>
        </div>
    
   </nav>
   <div class="buttons">
    <a href="./pageLogin.html" class="btn login">Login</a>
   </div>
  </div>
</header>

    <main>
        <div class="container_cadastro">
            <section class="visual">
                <h2>Bem-vindo à tela de cadastro!</h2>
                <img src="./imagens/logoJudo.png" alt="">
                <!-- <span><a href="./dashboard.html">Dashboard</a></span> -->
            </section>
            <section class="interacao">
                <div class="conteudo">
                    <h2>Preencha os dados para cadastrar!</h2>

                    <label for="input_nomeUsuario">Nome do Usuário</label>
                    <input type="text" name="" id="input_nomeUsuario" oninput="valNome()" placeholder="Insira o nome do colaborador">

                    <label for="input_emailUsuario">E-mail do Usuário</label>
                    <input type="text" name="" id="input_emailUsuario" oninput="valEmail()" placeholder="Insira o e-mail do colaborador">
                    <div id="div_mensagemEmail"></div>

                    <label for="input_senhaUsuario">Senha</label>
                    <input type="password" name="" id="input_senhaUsuario" oninput="valSenha()" placeholder="Insira a senha">
                    <div id="div_mensagemSenha"></div>

                    <label for="input_repetirSenhaUsuario">Repetir Senha</label>
                    <input type="password" name="" id="input_repetirSenhaUsuario" oninput="valRepetirSenha()"placeholder ="Repita a senha inserida">
                    <div id="div_mensagemRepetirSenha"></div>

                    <button onclick="entrar()">Cadastrar</button>
                </div>
            </section>
        </div>
    </main>

    <footer>

    </footer>

</body>
</html>

<script>
    function valNome() {
    var nome = document.getElementById('input_nomeUsuario').value
    var tamanho = nome.length - 1
    var ultimaLetra = nome[tamanho]
    var ultimaLetraMaiuscula = ultimaLetra.toUpperCase()
    var ultimaLetraMinuscula = ultimaLetra.toLowerCase()

    if (ultimaLetra == ultimaLetraMaiuscula && ultimaLetra == ultimaLetraMinuscula || (tamanho > 254)) { // Válido apenas a entrada de letras e o limite é 255
        if (!(ultimaLetra == ' ')) {
            input_nomeUsuario.value = input_nomeUsuario.value.slice(0, -1)
        }
    }
}

function valEmail() {
    var email = document.getElementById('input_emailUsuario').value

    var tamanho = email.length - 1
    
    if (email.includes('@')) { // Não pode ter mais de 1 '@'
        email = email.replace('@', '*')
        if (email.includes('@')) {
            div_mensagemEmailSenha.innerHTML = 'Apenas 1 "@" é permitido'
        } else {
            div_mensagemEmailSenha.innerHTML = ''
        }    
    } else {
        div_mensagemEmailSenha.innerHTML = ''
    }    

    if (email[0] == '.' || (email[tamanho] == '.' && email[(tamanho - 1)] == '.')) { // Não deixa começar com ponto e nem ter 2 pontos seguidos
        input_emailUsuario.value = input_emailUsuario.value.slice(0, -1)
    }
    
    if (email[tamanho] == ' ' || email[tamanho] == ',' || email[tamanho] == ':' || email[tamanho] == ';') { // Não pode usar 'espaço', 'vírgula', ':', ';'
        input_emailUsuario.value = input_emailUsuario.value.slice(0, -1)
    }
}

function valSenha() {
    var senha = document.getElementById('input_senhaUsuario').value
    var tamanho = senha.length

    if (tamanho > 50) { // Não deixa colocar mais que 50 caracteres
        input_senhaUsuario.value = input_senhaUsuario.value.slice(0, -1)
    }
}

function valRepetirSenha() {
    var repetirSenha = document.getElementById('input_repetirSenhaUsuario').value
    var tamanho = repetirSenha.length

    if (tamanho > 50) { // Não deixa colocar mais que 50 caracteres
        input_repetirSenhaUsuario.value = input_repetirSenhaUsuario.value.slice(0, -1)
    }
}

function entrar() {
    var nomeUsuario = input_nomeUsuario.value;
    var email = document.getElementById('input_emailUsuario').value
    var validacao = true
    var senha = document.getElementById('input_senhaUsuario').value
    var senhaMaiuscula = senha.toUpperCase()
    var senhaMinuscula = senha.toLowerCase()
    var repetirSenha = document.getElementById('input_repetirSenhaUsuario').value

    // div_mensagemEmailSenha.innerHTML = ''
    if(nomeUsuario == "" || email == "" || areaUsuario == "" || senha == "" || repetirSenha == ""){
        div_mensagemRepetirSenha.innerHTML = `Preencha todos os campos para continuar`
    } else {
        if (email.length > 255) { // Não pode ter mais de 255 caracteres
            validacao = false
            div_mensagemEmail.innerHTML += `O endereço de email não pode conter mais de 255 caracteres`
        } else if (email.endsWith('.')) { // Não pode terminar com ponto
            validacao = false
            div_mensagemEmail.innerHTML += `O endereço de email não pode terminar com '.'`
        } else if (email.includes('@') == false) { // Tem que ter pelo menos 1 '@'
            validacao = false
            div_mensagemEmail.innerHTML += `O endereço de email precisa conter ao menos 1 '@'`
        } else {
            div_mensagemEmail.innerHTML = ''
        }

        div_mensagemSenha.innerHTML = ''
        
        // if (senha == senhaMaiuscula && senha == senhaMinuscula) {
        //     div_mensagemSenha.innerHTML += 'É preciso ter pelo menos 1 letra <br>'
        //     validacao = false
        // }
        if (senha == senhaMaiuscula) { // A Senha deve ter pelo menos 1 letra Minúscula
            div_mensagemSenha.innerHTML += 'A senha deve conter ao menos 1 letra Minúscula <br>'
            validacao = false
        }
        if (senha == senhaMinuscula) { // A Senha deve ter pelo menos 1 letra Maiúscula
            div_mensagemSenha.innerHTML += 'A senha deve conter ao menos 1 letra Maiúscula <br>'
            validacao = false
        }
        if (senha.length < 8) { // A senha deve conter pelo menos 8 caracteres
            div_mensagemSenha.innerHTML += 'A senha deve conter ao menos 8 Caracteres <br>'
            validacao = false
        }
        
        if (senha != repetirSenha) { // As senhas devem ser iguais
            div_mensagemRepetirSenha.innerHTML = 'As senhas devem ser iguais'
            validacao = false    
        } else {
            div_mensagemRepetirSenha.innerHTML = ''
        }
        
        if (validacao) {
            alert('Usuário Cadastrado.')
            input_nomeUsuario.value = ''
            input_emailUsuario.value = ''
            input_senhaUsuario.value = ''
            input_repetirSenhaUsuario.value = ''
        }

    }
}


</script>